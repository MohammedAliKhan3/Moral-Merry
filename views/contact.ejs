<%- include('partials/header', {page: 'contact'}); %>

<section class="contact-hero">
  <div class="container">
    <div class="hero-content">
      <h1 data-scroll>Contact Us</h1>
      <p data-scroll>We'd love to hear from you</p>
    </div>
  </div>
</section>

<section class="contact-info">
  <div class="container">
    <div class="contact-grid">
      <div class="contact-card" data-scroll>
        <div class="contact-icon">
          <svg viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
        </div>
        <h3>Visit Us</h3>
        <address>
          Owaisipura, Masab Tank<br>
          Hyderabad, India
        </address>
        <a href="https://maps.google.com/?q=Owaisipura, Masab Tank, Hyderabad" class="map-link" target="_blank">View on Map â†’</a>
      </div>

      <div class="contact-card" data-scroll>
        <div class="contact-icon">
          <svg viewBox="0 0 24 24">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
          </svg>
        </div>
        <h3>Email Us</h3>
        <p>General Inquiries:</p>
        <a href="mailto:oman.akbar@gmail.com" class="email-link">oman.akbar@gmail.com</a>
        <p>Admissions:</p>
        <a href="mailto:moralmerry@moralmerry.com" class="email-link">moralmerry@moralmerry.com</a>
      </div>

      <div class="contact-card" data-scroll>
        <div class="contact-icon">
          <svg viewBox="0 0 24 24">
            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
          </svg>
        </div>
        <h3>Call Us</h3>
        <p>Main Office:</p>
        <a href="tel:+919160215224" class="phone-link">+91 91602 15224</a>
        <p>Admissions:</p>
        <a href="tel:+919710418381" class="phone-link">+91 97104 18381</a>
      </div>
    </div>
  </div>
</section>

<section class="contact-form-section">
  <div class="container">
    <div class="section-header" data-scroll>
      <h2 class="text-center">Send Us a Message</h2>
      <p class="text-center">Have questions? We're here to help</p>
    </div>

    <!-- Hidden iframe for form submission -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <form 
      id="contact-form" 
      class="contact-form" 
      method="POST" 
      action="https://submit-form.com/loJzjOWy8"
      target="hidden_iframe"
      data-scroll
    >
      <!-- Hidden fields required by submit-form.com -->
      <input type="hidden" name="_redirect" value="" />
      <input type="hidden" name="_email.template.title" value="New Contact Form Submission" />
      <input type="hidden" name="_email.template.auto_response" value="Thank you for contacting us! We will get back to you soon." />
      <input type="text" name="_honeypot" style="display:none" />

      <div class="form-row">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" placeholder="Enter your full name" required />
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" placeholder="example@email.com" required />
        </div>
      </div>

      <div class="form-group">
        <label for="subject">Subject</label>
        <select id="subject" name="subject" required>
          <option value="" disabled selected>Select a topic</option>
          <option value="admissions">Admissions Inquiry</option>
          <option value="academics">Academic Questions</option>
          <option value="facilities">Campus Facilities</option>
          <option value="other">Other Inquiry</option>
        </select>
      </div>

      <div class="form-group">
        <label for="message">Your Message</label>
        <textarea id="message" name="message" rows="6" placeholder="Enter your message here..." required></textarea>
      </div>

      <div class="text-center">
        <button type="submit" class="cta-button">Send Message</button>
      </div>
    </form>

    <div id="form-message" style="display:none; margin-top: 20px; padding: 15px; background: #f0fff0; border: 1px solid #a0d8a0; border-radius: 4px; color: #2b662b; font-weight: bold; text-align:center;">
      Thank you for contacting us! We will get back to you soon.
    </div>
  </div>
</section>

<section class="map-section">
  <div class="container">
    <div class="map-container" data-scroll>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3807.2124437079583!2d78.44528087581904!3d17.401589502394536!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bcb9715eddbce3f%3A0x2d78ddbdf1c2643!2sMORAL%20MERRY%20HIGH%20SCHOOL!5e0!3m2!1sen!2sin!4v1747457300712!5m2!1sen!2sin"
        width="100%"
        height="450"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
      ></iframe>
    </div>
    <div class="address-container text-center" data-scroll>
      <p class="physical-address">
        <strong>Address:</strong> 10-4-13/11/A/5/1, MG Nagar, Owaisi Pura, Masab Tank, Hyderabad, Telangana 500028
      </p>
    </div>
  </div>
</section>

<%- include('partials/footer'); %>
<%- include('partials/chatbot') %>
<script src="/js/public.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const iframe = document.getElementById('hidden_iframe');
    const messageBox = document.getElementById('form-message');
    const submitButton = form.querySelector('button[type="submit"]');
    
    // Store original button text
    const originalButtonText = submitButton.textContent;
    const originalButtonHTML = submitButton.innerHTML;

    form.addEventListener('submit', function() {
      // Change button to loading state
      submitButton.innerHTML = `
        <span class="button-spinner">
          <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/>
            <path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z">
              <animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/>
            </path>
          </svg>
        </span>
        Sending...
      `;
      submitButton.disabled = true;
    });

    iframe.onload = function() {
      try {
        // Check if the form submission was successful
        if (iframe.contentWindow.location.href !== 'about:blank') {
          // Show thank you message
          messageBox.style.display = 'block';
          form.reset();
          
          // Reset button after a delay
          setTimeout(function() {
            submitButton.innerHTML = originalButtonHTML;
            submitButton.disabled = false;
          }, 3000);
        } else {
          // If submission failed, reset button
          submitButton.innerHTML = originalButtonHTML;
          submitButton.disabled = false;
        }
      } catch (e) {
        // Cross-origin error means submission was successful
        messageBox.style.display = 'block';
        form.reset();
        
        // Reset button after a delay
        setTimeout(function() {
          submitButton.innerHTML = originalButtonHTML;
          submitButton.disabled = false;
        }, 3000);
      }
    };
  });
</script>

<style>
  /* Add these styles to your existing CSS */
  .cta-button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }
  
  .button-spinner {
    display: inline-block;
    margin-right: 8px;
    vertical-align: middle;
  }
  
  .button-spinner svg {
    animation: spin 0.75s linear infinite;
  }
  
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
</style>